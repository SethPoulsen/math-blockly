<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Vectors and scalars - Math blockly</title>

  <script src="../blockly/blockly_uncompressed.js"></script>
  <script src="../js/field_mathjax.js"></script>
  <script src="../blockly/blocks/math.js"></script>
  <script src="../blockly/msg/js/en.js"></script>
  <script src="../blockly-type-indicator/typeIndicator.js"></script> <!-- indicate matching slots when dragging block !-->
  <script src="../js/math-blocks.js"></script>  <!-- Load custom blocks !-->
  <script src="../js/math-blocks-vectors.js"></script>  <!-- Load custom blocks !-->

   <!-- Configure MathJax !-->
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX","output/SVG"],
  extensions: ["tex2jax.js"],
  TeX: {
    extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"],
  },
  skipStartupTypeset: false,
  positionToHash: false,
  showMathMenu: false,
  showMathMenuMSIE: false,
});
  </script>

  <!-- Load MathJax !-->
  <script>
  /* We must wait until MathJax has loaded itself (at least to the point that MathJax.Hub.queue exists) before loading Blockly.
   * This function will be called by a MathJax signal handler once MathJax is loaded.
   */
  var workspace;
  function injectBlockly() {
    workspace = Blockly.inject('blocklyDiv',
        {
          media: '../blockly/media/',
          disable: false,
          toggleInline: false,
          toolbox: document.getElementById('toolbox'),
          trashcan: true,
          zoom: {controls: true, wheel: true, startScale: 1}
        });
//    Blockly.Xml.domToWorkspace( workspace, document.getElementById("workspace-initial") );
   }

  /* Set up a hook to load Blockly */
  var MathJax = { AuthorInit: function() {
      MathJax.Hub.Register.StartupHook( "End", injectBlockly );

    }};
  /* Load local MathJax if viewing page locally, otherwise use remote MathJax */
  var scriptNode = document.createElement( "script" );
  scriptNode.type = "text/javascript";
  if( window.location.protocol == "file:" ) {
    scriptNode.src = "../MathJax/unpacked/MathJax.js";
  } else {
    scriptNode.src = "https://cdn.mathjax.org/mathjax/latest/MathJax.js";
  }
  document.getElementsByTagName('head')[0].appendChild( scriptNode );
  </script>
  <script>
  /* Set content of element 'id' to 'text' */
  function setContentById( id, text )
  {
    var e = document.getElementById( id );
    if( e ) {
      e.innerHTML = "";
      e.appendChild( document.createTextNode( text ) );
    }
  }

  function dumpXML() {
    var xml = Blockly.Xml.workspaceToDom(workspace);
    var xml_text = Blockly.Xml.domToPrettyText(xml);
    console.log( xml_text );
  }
  
  </script>
  <style>
    body {
      background-color: #fff;
      font-family: sans-serif;
    }
    h1 {
      font-weight: normal;
      font-size: 140%;
    }
    /* Hide block highlight SVG elements while hacking */
    .blocklyPathLight {
      display: none;
    }
    
    xml {
      display: none;
    }
  </style>
</head>
<body>
  <h1>Demo of vector and scalar arithmetic</h1>

  <div id="blocklyDiv" style="height: 600px; width: 100%;"></div>
  <div style="font-size: small; text-align: right;"><a href="#" onclick="dumpXML();">(dump XML)</a></div>
  
  <xml xmlns="http://www.w3.org/1999/xhtml" style="display: none;" id="toolbox">
    <block type="vector_0"></block>
    <block type="vector_v"></block>
    <block type="vector_AB"></block>

    <block type="vector_constructor" id="/LZ?~6BCL21w.n}A1p:{" x="121" y="117">
      <value name="INPUT1">
        <block type="math_number" id="!Fr9b2Q?|V43!$r}1dCG">
          <field name="NUM">2</field>
        </block>
      </value>
      <value name="INPUT2">
        <block type="math_number" id="$q{3GSZxc.eQ(XtF}u9F">
          <field name="NUM">1</field>
        </block>
      </value>
      <value name="INPUT3">
        <block type="math_number" id="i#Wvp/1q(+KoJ||.aE(5">
          <field name="NUM">3</field>
        </block>
      </value>
    </block>

    <block type="abstract_addition"></block>
    <block type="abstract_equality"></block>
    <block type="abstract_modulus"></block>
    <block type="vector_products">
      <field name="OPERATOR">CROSS</field>
    </block>
    <block type="abstract_scalarmultiplication"></block>
    
    <block type="math_number">
      <field name="NUM">0</field>
    </block>
    
    <block type="set_r"></block>
  </xml>
  
  <xml xmlns="http://www.w3.org/1999/xhtml" style="display: none;" id="workspace-initial">
    <block type="abstract_addition" id="Twa],tQd+X[}O0TwEz?x" x="220" y="23"></block>
    <block type="math_number" id="YL~(5sTw;LFOQYHaKGZp" x="197" y="91">
      <field name="NUM">0</field>
    </block>
    <block type="number_0" id=";.dQ|*zQIN||U/i@z$ns" x="246" y="91"></block>
    <block type="number_1" id="Dw#Zj#8{el($!=y56OpU" x="299" y="92"></block>
    <block type="vector_0" id="%`.DNg{3!rM#T:1_#FTl" x="194" y="143"></block>
    <block type="vector_AB" id="Vjy[Q$B;Mz72l]F:##,/" x="277" y="142"></block>
    <block type="set_r" id="%H2Y@}d+yDPH`S_[xlrJ" x="241" y="205"></block>
  </xml>

  <script>
   
  </script>
</body>
</html>
